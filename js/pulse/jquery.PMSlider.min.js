!function(t,i,s){"use strict";var n,e=i.Modernizr,o=i.navigator&&i.navigator.msPointerEnabled&&i.MSGesture,h="ontouchstart"in i||o||i.DocumentTouch&&document instanceof DocumentTouch,a=[],r=null,l=null,p=null,c=[],u=90,m=0,d=0;t.PMSlider=function(i,s){this.$el=t(s),this._init(i)},t.PMSlider.defaults={speed:500,easing:"ease",loop:!1,controlNav:"thumbnails",controlNavThumbs:!1,animation:"fade",fullScreen:!1,slideshow:!1,slideshowSpeed:8e3,pauseOnHover:!1,arrows:!0,fixedHeight:!1,fixedHeightValue:800,touch:!0,progressBar:!1},t.PMSlider.prototype={_init:function(i){this.options=t.extend(!0,{},t.PMSlider.defaults,i),this._config(),this._initEvents(),this._initFullScreen(),this._slideShow()},_config:function(){var i=this;if(this.$list=this.$el.children("ul"),this.options.loop&&"slide"==this.options.animation){var s=this.$list.children("li:first-child"),n=this.$list.children("li:last-child");this.$list.append(s.clone(!0).addClass("clone")).prepend(n.clone(!0).addClass("clone"))}this.$items=this.$list.children("li"),this.itemsCount=this.$items.length,t("#pm-slider ul li img").each(function(i,s){var n=t(s);c.push(n)}),this.$items.each(function(i,s){var n=t(s),e=n.find("h1").width(),o=n.find(".pm-caption-decription").width();n.data("properties",{titleWidth:e,captionWidth:o})}),"fade"==this.options.animation&&this.$items.each(function(i,s){var n=t(s);0!=i&&n.fadeOut("fast")}),"thumbnails"==this.options.controlNav&&(this.$items.each(function(i,s){var n=t(s);a.push(n.data("thumb"))}),this.options.loop&&"slide"==this.options.animation&&(a.splice(0,1),a.splice(this.itemsCount-2,1))),this.support=e.csstransitions&&e.csstransforms,this.support3d=e.csstransforms3d;var r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},l={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",transform:"transform"};if(this.support&&(this.transEndEventName=r[e.prefixed("transition")]+".PMSlider",this.transformName=l[e.prefixed("transform")]),this.current=0,this.old=0,this.options.loop&&"slide"==this.options.animation){-1*this.current++*100/this.itemsCount;this.$list.css("margin-left",-1*this.current*100+"%"),this.current--}if(this.isAnimating=!1,this.$list.css("width",100*this.itemsCount+"%"),this.options.fixedHeight&&(this.$list.css({position:"relative"}),this.$items.find("img").css({maxWidth:"inherit"}),this.$items.css({height:this.options.fixedHeightValue+"px"})),this.support&&"slide"==this.options.animation&&this.$list.css("transition",this.transformName+" "+this.options.speed+"ms "+this.options.easing),this.$items.css("width",100/this.itemsCount+"%"),this.itemsCount>1){if(this.options.controlNav===!0){for(var p="",u=this.options.loop&&"slide"==this.options.animation?this.itemsCount-2:this.itemsCount,m=0;u>m;++m){var d=m===this.current?'<span class="pm-currentDot"></span>':"<span></span>";p+=d}var v=t('<div class="pm-dots"/>').append(p).appendTo(this.$el);this.$navDots=v.children("span"),this.options.arrows&&(t(".pm-dots").prepend('<div class="pm-prev reset-pulse-sizing"><i class="fa fa-angle-left"></i></div>'),t(".pm-dots").append('<div class="pm-next reset-pulse-sizing"><i class="fa fa-angle-right"></i></div>')),this.options.controlNavThumbs===!0&&this.$navDots.each(function(s,n){t(this).hover(function(n){var e=t(".pmslide_"+s).data("thumb");""!=e&&i._toolTip(e,this)},function(i){var n=t(".pmslide_"+s).data("thumb");""!=n&&t("#pm_slider_tooltip").remove()})})}else if("thumbnails"==this.options.controlNav){for(var f="",u=this.options.loop&&"slide"==this.options.animation?this.itemsCount-2:this.itemsCount,m=0;u>m;++m){var g=m===this.current?'<span class="pm-currentThumb"><img src="'+a[m]+'" /></span>':'<span><img src="'+a[m]+'" /></span>';f+=g}var _=t('<div class="pm-thumbs"/>').append(f).appendTo(this.$el);this.$navThumbs=_.children("span")}(this.options.loop||"slide"!=this.options.animation)&&(this.options.loop||"fade"!=this.options.animation)?this.$navPrev=t(".pm-prev").show():this.$navPrev=t(".pm-prev").hide(),this.$navNext=t(".pm-next")}if(this.options.fixedHeight&&(this.$items.find("img").remove(),this.$items.each(function(i,s){var n=t(s);n.css({backgroundImage:"url("+c[i].attr("src")+")",backgroundPosition:"center center"})})),o&&this.options.touch?this._activateMSTouch():h&&this.options.touch&&this._activateTouch(),this.options.arrows){"fade"==this.options.animation?t(".pm-slide-count").html(this.current+1+" / "+this.itemsCount):this.options.loop?t(".pm-slide-count").html(this.current+1+" / "+(this.itemsCount-2)):t(".pm-slide-count").html(this.current+1+" / "+this.itemsCount);t(".pm-next").height(),t(".pm-next").width()}i._resetAnimation(),("slide"!=i.options.animation||i.options.loop)&&"slide"==i.options.animation?(t("#pm-slider").css({height:"auto"}),t("#pm-slider").animate({opacity:1},500,function(t){i._animateSlide(i.current)}),t("#pm-pulse-loader").hide()):(t("#pm-pulse-loader").hide(),t("#pm-slider").css({height:"auto"}),t("#pm-slider").animate({opacity:1}),i._animateSlide(this.current))},_animateSlide:function(s){var n=t(".pmslide_"+s),e=n.find("h1"),o=n.find("h2"),h=n.find(".pm-caption-decription"),a=n.find(".pm-slide-btn"),r=n.find(".pm-holder-bg");r.length>0&&(r.css("transition","all .9s ease 0s"),r.css({opacity:1})),e.length>0&&(e.css("transition","all .6s ease 0s"),e.css({opacity:1,marginTop:0})),o.length>0&&(o.css("transition","all .6s ease 0s"),o.css({opacity:1,marginLeft:0})),h.length>0&&(h.css("transition","all .6s ease 0s"),h.css({opacity:1,marginLeft:0})),a.length>0&&(a.css("transition","all .6s ease 0s"),a.hasClass("scalable")?a.css({opacity:1,marginTop:45}):a.css({opacity:1,marginTop:t(i).width()<=480?45:190}))},_resetAnimation:function(){this.$items.each(function(i,s){var n=t(s),e=n.find("h1"),o=n.find("h2"),h=n.find(".pm-caption-decription"),a=n.find(".pm-slide-btn"),r=n.find(".pm-holder-bg");r.length>0&&(r.css("transition","all .9s ease 0s"),r.css({opacity:0})),e.length>0&&e.finish().css({opacity:0,marginTop:-50}),o.length>0&&o.finish().css({opacity:0,marginLeft:0}),h.length>0&&h.finish().css({opacity:0,marginLeft:0}),a.length>0&&a.finish().css({opacity:0,marginTop:280},0)})},_activateTouch:function(){var s=this;this.$items.each(function(n,e){function o(s){var n=s.changedTouches,e=n[0];m=e.pageX,t("#pm-touchstart").html("Touch start = "+m);var o=document.createEvent("MouseEvent");o.initMouseEvent(type,!0,!0,i,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(o),s.preventDefault()}function h(t){var i=t.changedTouches,s=i[0];d=s.pageX}function a(i){d>m+60&&(t("#pm-swipe").html("Swiping right"),s._executeTouch("right")),m-60>d&&(t("#pm-swipe").html("Swiping left"),s._executeTouch("left"))}e.addEventListener("touchstart",o,!1),e.addEventListener("touchmove",h,!1),e.addEventListener("touchend",a,!1)})},_activateMSTouch:function(){var i=this;this.$items.each(function(s,n){function e(i){try{a.target=i.target}catch(s){}i.target==a.target&&(a.addPointer(i.pointerId),m=i.screenX,t("#pm-touchstart").html("MS Touch start = "+m)),i.stopPropagation()}function o(i){d=i.screenX,t("#pm-touchmove").html("MS Touch move = "+i.screenX+" and Touch start = "+m),i.preventDefault()}function h(s){d>m+30&&(t("#pm-swipe").html("Swiping right"),i._executeTouch("right")),m-30>d&&(t("#pm-swipe").html("Swiping left"),i._executeTouch("left"))}n.style.msTouchAction="none";var a=new MSGesture;a.target=n,n.addEventListener("MSPointerDown",e,!1),n.addEventListener("MSGestureChange",o,!1),n.addEventListener("MSGestureEnd",h,!1)})},_executeTouch:function(t){switch(t){case"right":"slide"==this.options.animation?this._navigate("previous"):"fade"==this.options.animation&&this._navigate("next");break;case"left":"slide"==this.options.animation?this._navigate("next"):"fade"==this.options.animation&&this._navigate("previous")}},_initFullScreen:function(){if(this.options.fullScreen){r=t("#pm-container"),r.css({overflow:"hidden",width:"100%",position:"relative"}),l=t("#pm-slider"),l.css({height:"100%",position:"relative"}),p=t(".pm-slides-container"),p.children().css({overflow:"hidden",height:"100%",position:"absolute",top:"0"}),p.children().css({height:"100%",position:"relative"}),t.each(c,function(t,i){i.css({"max-width":"none",left:"0",top:"0",position:"absolute","z-index":"-1"})});var s=t(i);this._checkWidth(),s.resize(this._checkWidth)}},_checkWidth:function(){setTimeout(function(){var s=t(i),n=0,e=0;n=s.width(),e=s.height(),r.height(e),p.height(e),t.each(c,function(t,i){var s=i,o=s.width(),h=s.height(),a=e/n,r=h/o;a>r?s.css({height:e,width:e/r}):s.css({height:n*r,width:n}),s.css({left:(n-p.children().find("img").width())/4,top:(e-p.children().find("img").height())/4})})},10)},_initEvents:function(){var i=this;this.itemsCount>1&&(this.$navPrev.on("click.PMSlider",t.proxy(this._navigate,this,"previous")),this.$navNext.on("click.PMSlider",t.proxy(this._navigate,this,"next")),this.options.controlNav===!0?this.$navDots.on("click.PMSlider",function(s){i.options.arrows?i._jump(t(this).index()-1):i._jump(t(this).index())}):"thumbnails"===this.options.controlNav&&this.$navThumbs.on("click.PMSlider",function(s){i.options.arrows?i._jump(t(this).index()-1):i._jump(t(this).index())}))},_navigate:function(i){var s=this;return this.isAnimating||1==this.itemsCount?!1:this.options.loop&&"slide"==this.options.animation&&3==this.itemsCount?!1:(this.isAnimating=!0,s._resetAnimation(),this.options.slideshow&&this.current==this.itemsCount-1&&"next"==i?(this.old=this.itemsCount-1,this.current=-1):this.old=this.current,"next"===i&&this.current<=this.itemsCount?(++this.current,this.options.loop&&"fade"==this.options.animation&&this.current>=this.itemsCount&&(this.current=0)):"previous"===i&&this.current>=0&&(--this.current,this.options.loop&&"fade"==this.options.animation&&-1==this.current&&(this.current=this.itemsCount-1)),"slide"==this.options.animation&&this._slide(),"fade"==this.options.animation&&this._fade(),void(this.options.loop&&"slide"==this.options.animation?this.current+1>this.itemsCount-2?t(".pm-slide-count").html("1 / "+(this.itemsCount-2)):this.current<0?t(".pm-slide-count").html(this.itemsCount-2+" / "+(this.itemsCount-2)):t(".pm-slide-count").html(this.current+1+" / "+(this.itemsCount-2)):this.options.loop?"fade"==this.options.animation&&t(".pm-slide-count").html(this.current+1+" / "+this.itemsCount):t(".pm-slide-count").html(this.current+1+" / "+this.itemsCount)))},_runSlideShow:function(i){var s=this;"start"==i?(clearTimeout(n),t("#pm-slider-progress-bar").remove(),t("#pm-slider").append('<div id="pm-slider-progress-bar"></div>'),s.options.progressBar||t("#pm-slider-progress-bar").css({display:"none"}),n=setTimeout(function(){return s.isAnimating?void 0:s._autoplay()},this.options.slideshowSpeed)):"pause"==i?clearTimeout(n):"resume"==i&&(n=setTimeout(function(){return s.isAnimating?void 0:s._autoplay()},this.options.slideshowSpeed))},_slideShow:function(){var t=this;this.options.slideshow&&("slide"===this.options.animation&&this.itemsCount>3?t._runSlideShow("start"):"fade"===this.options.animation&&this.itemsCount>1&&t._runSlideShow("start"),t._bindMouseEvents())},_bindMouseEvents:function(){var i=this;this.options.pauseOnHover&&t("#pm-slider").bind("mouseenter mouseleave mousemove",function(t){"mouseenter"==t.type?i._runSlideShow("pause"):"mouseleave"==t.type?i._runSlideShow("resume"):"mousemove"==t.type&&i._runSlideShow("pause")})},_autoplay:function(){this._navigate("next"),this._runSlideShow("start")},_toggleNavControls:function(){switch(this.options.loop&&"slide"==this.options.animation&&this.$list.css({transition:this.transformName+" "+this.options.speed+"ms "+this.options.easing+" 0s"}),this.current){case 0:this.options.loop?(this.$navNext.show(),this.$navPrev.show()):(this.$navNext.show(),this.$navPrev.hide());break;case this.itemsCount-1:this.options.loop?(this.$navNext.show(),this.$navPrev.show()):(this.$navNext.hide(),this.$navPrev.show());break;default:this.$navNext.show(),this.$navPrev.show()}this.options.loop&&"slide"==this.options.animation?this.options.controlNav===!0?this.current+2>=this.itemsCount?this.$navDots.eq(this.old).removeClass("pm-currentDot").end().eq(0).addClass("pm-currentDot"):this.$navDots.eq(this.old).removeClass("pm-currentDot").end().eq(this.current).addClass("pm-currentDot"):"thumbnails"===this.options.controlNav&&(this.current+2>=this.itemsCount?this.$navThumbs.eq(this.old).removeClass("pm-currentThumb").end().eq(0).addClass("pm-currentThumb"):this.$navThumbs.eq(this.old).removeClass("pm-currentThumb").end().eq(this.current).addClass("pm-currentThumb")):this.options.loop&&"fade"==this.options.animation?this.options.controlNav===!0?this.current>=this.itemsCount?this.$navDots.eq(this.old).removeClass("pm-currentDot").end().eq(0).addClass("pm-currentDot"):this.$navDots.eq(this.old).removeClass("pm-currentDot").end().eq(this.current).addClass("pm-currentDot"):"thumbnails"===this.options.controlNav&&(this.current>=this.itemsCount?this.$navThumbs.eq(this.old).removeClass("pm-currentThumb").end().eq(0).addClass("pm-currentThumb"):this.$navThumbs.eq(this.old).removeClass("pm-currentThumb").end().eq(this.current).addClass("pm-currentThumb")):this.options.controlNav===!0?this.$navDots.eq(this.old).removeClass("pm-currentDot").end().eq(this.current).addClass("pm-currentDot"):"thumbnails"===this.options.controlNav&&this.$navThumbs.eq(this.old).removeClass("pm-currentThumb").end().eq(this.current).addClass("pm-currentThumb")},_fade:function(){function i(){n.each(function(i,s){var n=t(s);i==e&&n.fadeIn(h,a)})}var s=this;this._toggleNavControls();var n=(this.$el.children("ul"),this.$list.children("li")),e=this.current,o=this.old,h=this.options.speed;n.each(function(s,n){var e=t(n);s==o&&e.fadeOut(h,i)});var a=t.proxy(function(){this.isAnimating=!1,s._animateSlide(this.current),s.options.slideshow&&s._runSlideShow("start")},this)},_slide:function(){var i=this;this._toggleNavControls();var s=this.$el.children("ul"),n=(this.$list.children("li"),-1*this.current*100/this.itemsCount);this.support?this.$list.css(this.transformName,this.support3d?"translate3d("+n+"%,0,0)":"translate("+n+"%)"):s.animate({left:-1*this.current*100+"%"},this.options.speed,function(){t(this).is("animated")||(e.call(),i.options.slideshow&&i._runSlideShow("start"))});var e=t.proxy(function(){if(this.isAnimating=!1,this.options.loop&&"slide"==this.options.animation)if(this.current+2>=this.itemsCount){this.current=0,this.old=0;var t=-1*this.current*100/this.itemsCount;this.support?(this.$list.css("transition",this.transformName+" 0ms ease 0s"),this.$list.css(this.transformName,this.support3d?"translate3d("+t+",0,0)":"translate("+t+"px)")):s.css({left:t+"%"},this.options.speed)}else if(this.current<0){this.current=this.itemsCount-3,this.old=this.current;var t=-1*this.current*100/this.itemsCount;this.support?(this.$list.css("transition",this.transformName+" 0ms ease 0s"),this.$list.css(this.transformName,this.support3d?"translate3d("+t+"%,0,0)":"translate("+t+"%)")):s.css({left:-1*this.current*100+"%"},this.options.speed)}this.options.loop?this.current<0?i._animateSlide(this.itemsCount-3):this.current>=this.itemsCount-2?i._animateSlide(0):i._animateSlide(this.current):i._animateSlide(this.current),i.options.slideshow&&i._runSlideShow("start")},this);this.support&&this.$list.on(this.transEndEventName,t.proxy(e,this))},_jump:function(i){var s=this;return i===this.current||this.isAnimating?!1:(this.isAnimating=!0,this.old=this.current,this.current=i,console.log("position = "+i+" and this.current = "+this.current),this.options.loop&&"slide"==this.options.animation?t(".pm-slide-count").html(this.current+1+" / "+(this.itemsCount-2)):this.options.loop?"fade"==this.options.animation&&t(".pm-slide-count").html(this.current+1+" / "+this.itemsCount):t(".pm-slide-count").html(this.current+1+" / "+this.itemsCount),"slide"==this.options.animation&&this._slide(),"fade"==this.options.animation&&this._fade(),void s._resetAnimation())},_toolTip:function(i,s){var n=t(s),e=t("#pm_slider_tooltip").height()+u,o=t("#pm_slider_tooltip").width()+12;t("body").append("<div id='pm_slider_tooltip'>"+i+"</div>"),t("#pm_slider_tooltip").css({top:n.pageY-o+"px",left:n.pageX+e+"px"}),t("#pm_slider_tooltip").css("top",n.offset().top-e+"px").css("left",+(n.offset().left-o)+"px").css({marginTop:0,opacity:1}),t("#pm_slider_tooltip").html('<img src="'+i+'" />')},destroy:function(){this.itemsCount>1&&(this.$navPrev.parent().remove(),1==this.options.controlNav?this.$navDots.parent().remove():"thumbnails"==this.options.controlNav&&this.$navThumbs.parent().remove()),this.$list.css("width","auto"),this.support&&this.$list.css("transition","none"),this.$items.css("width","auto")}};var v=function(t){i.console&&i.console.error(t)};t.fn.PMSlider=function(i){if("string"==typeof i){var s=Array.prototype.slice.call(arguments,1);this.each(function(){var n=t.data(this,"PMSlider");return n?t.isFunction(n[i])&&"_"!==i.charAt(0)?void n[i].apply(n,s):void v("no such method '"+i+"' for PMSlider instance"):void v("cannot call methods on PMSlider prior to initialization; attempted to call method '"+i+"'")})}else this.each(function(){var s=t.data(this,"PMSlider");s?s._init():s=t.data(this,"PMSlider",new t.PMSlider(i,this))});return this}}(jQuery,window);